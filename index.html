<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A fun and colorful clock app for children with event scheduling">
    <meta name="theme-color" content="#FFB6C1">
    <title>Kids Clock</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üïê</text></svg>">
</head>
<body>
    <div id="app">
        <!-- Settings Button -->
        <button id="settingsBtn" class="icon-btn settings-btn-fixed" aria-label="Settings">‚öôÔ∏è</button>

        <!-- Main Clock Display -->
        <main id="mainView">
            <div class="clock-container">
                <!-- Digital Clock -->
                <div id="digitalClock" class="clock-display">
                    <div class="time-display">
                        <span id="hours">00</span>:<span id="minutes">00</span>:<span id="seconds">00</span>
                    </div>
                    <div class="date-display" id="dateDisplay"></div>
                </div>

                <!-- Analog Clock -->
                <div id="analogClock" class="clock-display hidden">
                    <svg viewBox="0 0 200 200" class="analog-clock-svg">
                        <!-- Clock face -->
                        <circle cx="100" cy="100" r="95" fill="#fff" stroke="#333" stroke-width="3"/>

                        <!-- Hour markers -->
                        <g class="hour-markers">
                            <line x1="100" y1="10" x2="100" y2="20" stroke="#333" stroke-width="3"/>
                            <line x1="100" y1="180" x2="100" y2="190" stroke="#333" stroke-width="3"/>
                            <line x1="10" y1="100" x2="20" y2="100" stroke="#333" stroke-width="3"/>
                            <line x1="180" y1="100" x2="190" y2="100" stroke="#333" stroke-width="3"/>
                        </g>

                        <!-- Numbers -->
                        <text x="100" y="30" text-anchor="middle" font-size="20" font-weight="bold">12</text>
                        <text x="143" y="43" text-anchor="middle" font-size="20" font-weight="bold">1</text>
                        <text x="170" y="73" text-anchor="middle" font-size="20" font-weight="bold">2</text>
                        <text x="170" y="107" text-anchor="middle" font-size="20" font-weight="bold">3</text>
                        <text x="170" y="141" text-anchor="middle" font-size="20" font-weight="bold">4</text>
                        <text x="143" y="171" text-anchor="middle" font-size="20" font-weight="bold">5</text>
                        <text x="100" y="185" text-anchor="middle" font-size="20" font-weight="bold">6</text>
                        <text x="57" y="171" text-anchor="middle" font-size="20" font-weight="bold">7</text>
                        <text x="30" y="141" text-anchor="middle" font-size="20" font-weight="bold">8</text>
                        <text x="30" y="107" text-anchor="middle" font-size="20" font-weight="bold">9</text>
                        <text x="30" y="73" text-anchor="middle" font-size="20" font-weight="bold">10</text>
                        <text x="57" y="43" text-anchor="middle" font-size="20" font-weight="bold">11</text>

                        <!-- Hour hand -->
                        <line id="hourHand" x1="100" y1="100" x2="100" y2="50" stroke="#333" stroke-width="6" stroke-linecap="round"/>

                        <!-- Minute hand -->
                        <line id="minuteHand" x1="100" y1="100" x2="100" y2="35" stroke="#666" stroke-width="4" stroke-linecap="round"/>

                        <!-- Second hand -->
                        <line id="secondHand" x1="100" y1="100" x2="100" y2="30" stroke="#ff6b6b" stroke-width="2" stroke-linecap="round"/>

                        <!-- Center dot -->
                        <circle cx="100" cy="100" r="5" fill="#333"/>
                    </svg>
                </div>
            </div>
        </main>

        <!-- Event Modal -->
        <div id="eventModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Create New Event</h2>
                    <button class="close-btn" id="closeModal">‚úñÔ∏è</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="eventType">Event Type:</label>
                        <select id="eventType" class="input-field">
                            <option value="announcement">üì¢ Announcement</option>
                            <option value="picture">üñºÔ∏è Picture</option>
                            <option value="audio">üéµ Audio</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="eventTime">Time (24h format):</label>
                        <input type="time" id="eventTime" class="input-field" required>
                    </div>

                    <div class="form-group">
                        <label for="eventName">Event Name:</label>
                        <input type="text" id="eventName" class="input-field" placeholder="e.g., Snack Time!" required>
                    </div>

                    <!-- Announcement specific -->
                    <div id="announcementFields" class="event-specific-fields">
                        <div class="form-group">
                            <label for="announcementText">Announcement Message:</label>
                            <textarea id="announcementText" class="input-field" rows="3" placeholder="Time to wash your hands!"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="eventVoice">Voice (optional - overrides default):</label>
                            <select id="eventVoice" class="input-field">
                                <option value="">Use Default Voice</option>
                            </select>
                        </div>
                    </div>

                    <!-- Picture specific -->
                    <div id="pictureFields" class="event-specific-fields hidden">
                        <div class="form-group">
                            <label for="pictureUrl">Picture URL or upload:</label>
                            <input type="file" id="pictureUpload" class="input-field" accept="image/*">
                            <input type="text" id="pictureUrl" class="input-field" placeholder="Or paste image URL">
                        </div>
                    </div>

                    <!-- Audio specific -->
                    <div id="audioFields" class="event-specific-fields hidden">
                        <div class="form-group">
                            <label for="audioUrl">Audio URL or upload:</label>
                            <input type="file" id="audioUpload" class="input-field" accept="audio/*">
                            <input type="text" id="audioUrl" class="input-field" placeholder="Or paste audio URL">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="repeatDaily">
                            Repeat daily
                        </label>
                    </div>

                    <div class="modal-actions">
                        <button id="saveEventBtn" class="btn-primary">Save Event</button>
                        <button id="cancelEventBtn" class="btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Display Overlay -->
        <div id="eventOverlay" class="event-overlay hidden">
            <div class="event-overlay-content">
                <button class="close-overlay-btn" id="closeOverlay">‚úñÔ∏è</button>
                <div id="overlayContent"></div>
            </div>
        </div>

        <!-- Settings Panel -->
        <div id="settingsPanel" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚öôÔ∏è Settings</h2>
                    <button class="close-btn" id="closeSettings">‚úñÔ∏è</button>
                </div>
                <div class="modal-body">
                    <h3 style="color: #667eea; margin-bottom: 15px;">‚è∞ Clock Display</h3>

                    <div class="form-group">
                        <label>Clock Display:</label>
                        <div style="margin-top: 10px;">
                            <label style="display: block; margin-bottom: 8px;">
                                <input type="checkbox" id="showDigitalClock" checked>
                                Show digital clock
                            </label>
                            <label style="display: block; margin-bottom: 8px;">
                                <input type="checkbox" id="showAnalogClock">
                                Show analog clock
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="showSeconds" checked>
                            Show seconds on digital clock
                        </label>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="showAnalogSeconds" checked>
                            Show seconds on analog clock
                        </label>
                    </div>

                    <hr style="margin: 20px 0; border: 1px solid #ddd;">

                    <h3 style="color: #667eea; margin-bottom: 15px;">üìÖ Events</h3>

                    <div class="form-group">
                        <button id="addEventBtnSettings" class="btn-primary" style="width: 100%;">‚ûï Add New Event</button>
                    </div>

                    <div class="form-group">
                        <div id="eventsListSettings" class="events-list-settings">
                            <p class="no-events">No events scheduled yet!</p>
                        </div>
                    </div>

                    <hr style="margin: 20px 0; border: 1px solid #ddd;">

                    <h3 style="color: #667eea; margin-bottom: 15px;">üé® Background Colors</h3>

                    <div class="form-group">
                        <p style="font-size: 0.9em; color: #666; margin-bottom: 10px;">
                            Configure background colors for different times of day. Colors will transition smoothly.
                        </p>
                        <div id="timeColorsList"></div>
                        <button id="addTimeColorBtn" class="btn-secondary" style="width: 100%; margin-top: 10px;">+ Add Time Period</button>
                    </div>

                    <hr style="margin: 20px 0; border: 1px solid #ddd;">

                    <h3 style="color: #667eea; margin-bottom: 15px;">üéôÔ∏è Text-to-Speech</h3>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="enableTTS" checked>
                            Enable Text-to-Speech for announcements
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="ttsVoice">Voice:</label>
                        <select id="ttsVoice" class="input-field">
                            <option value="">Default Voice</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="ttsRate">Speech Rate:</label>
                        <input type="range" id="ttsRate" min="0.5" max="2" step="0.1" value="1" class="slider">
                        <span id="ttsRateValue">1x</span>
                    </div>

                    <div class="form-group">
                        <label for="ttsPitch">Speech Pitch:</label>
                        <input type="range" id="ttsPitch" min="0.5" max="2" step="0.1" value="1" class="slider">
                        <span id="ttsPitchValue">1x</span>
                    </div>

                    <div class="form-group">
                        <button id="testTTS" class="btn-primary">Test Voice</button>
                    </div>

                    <hr style="margin: 30px 0; border: 1px solid #ddd;">

                    <h3 style="color: #667eea; margin-bottom: 15px;">üïê Hourly Time Announcements</h3>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="enableHourlyAnnouncement">
                            Enable hourly time announcements
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="hourlyAnnouncementStart">Start Time (24h format):</label>
                        <input type="time" id="hourlyAnnouncementStart" class="input-field" value="08:00">
                    </div>

                    <div class="form-group">
                        <label for="hourlyAnnouncementEnd">End Time (24h format):</label>
                        <input type="time" id="hourlyAnnouncementEnd" class="input-field" value="22:00">
                    </div>

                    <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
                        The clock will announce the time at the top of each hour within this time range.
                    </p>

                    <hr style="margin: 30px 0; border: 1px solid #ddd;">

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="enable24Hour">
                            Use 24-hour time format
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed', err));
            });
        }
    </script>
</body>
</html>
